<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="Petly.Maui.Views.PetEditPage"
    x:Name="PetEditRoot"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:Petly.Maui.Controls"
    Title="Додати / редагувати тваринку"
    BackgroundColor="#FFFFFBF7">

    <Grid RowDefinitions="Auto,*" Background="{DynamicResource Theme_BackgroundBrush}">
        <!-- TOP BAR -->
        <controls:TopNavBar />

        <!-- BODY -->
        <ScrollView Grid.Row="1">
            <Grid Padding="24" ColumnDefinitions="320, *" ColumnSpacing="24" RowSpacing="18">

                <!-- Ліва колонка: Фото -->
                <VerticalStackLayout Grid.Column="0" Spacing="10">
                    <Border Stroke="#CCCCCC" StrokeThickness="1" BackgroundColor="White" HeightRequest="300">
                        <Image x:Name="PhotoPreview" Aspect="AspectFill"/>
                    </Border>

                    <Entry x:Name="PhotoEntry"
                           Placeholder="URL фото (https://...)"
                           Completed="OnPhotoUrlCompleted" />
                </VerticalStackLayout>
                

                <!-- Права колонка: Поля -->
                <VerticalStackLayout Grid.Column="1" Spacing="12">

                    <!-- Блок полів у вигляді сітки 2×2 -->
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" Margin="0,10,0,10">

                        <!-- 1-й ряд: Ім'я + Вид -->
                        <Entry x:Name="NameEntry"
                               Grid.Row="0" Grid.Column="0"
                               Placeholder="Ім’я"
                               TextColor="Black" />

                        <Entry x:Name="TypeEntry"
                               Grid.Row="0" Grid.Column="1"
                               Placeholder="Вид тварини (кіт, пес...)"
                               TextColor="Black" />

                        <!-- 2-й ряд: Вік + Стать -->
                        <Entry x:Name="AgeEntry"
                               Grid.Row="1" Grid.Column="0"
                               Placeholder="Вік (роки)"
                               Keyboard="Numeric"
                               TextColor="Black" />

                        <!-- Стать + смайлик -->
                        <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="10">
                            <Entry x:Name="GenderEntry"
                                   Placeholder="Стать (male/female)"
                                   TextChanged="OnGenderChanged"
                                   TextColor="Black"
                                   WidthRequest="180"/>

                            <Label x:Name="GenderEmoji"
                                   FontSize="30"
                                   VerticalOptions="Center"
                                   HorizontalOptions="Start"/>
                        </HorizontalStackLayout>

                    </Grid>


                    <Label Text="Опис" FontAttributes="Bold" />
                    <Editor x:Name="DescEditor" AutoSize="TextChanges" HeightRequest="160" />

                    <Grid ColumnDefinitions="Auto,Auto,Auto" ColumnSpacing="12" Margin="0,8,0,0">
                        <Button Text="Зберегти"
                                Clicked="OnSaveClicked"
                                BackgroundColor="#FFFFD129"
                                TextColor="Black"
                                HeightRequest="44"
                                CornerRadius="10" />

                        <Button x:Name="DeleteBtn"
                                Grid.Column="1"
                                Text="Видалити"
                                Clicked="OnDeleteClicked"
                                BackgroundColor="#E0E0E0"
                                TextColor="Black"
                                HeightRequest="44"
                                CornerRadius="10"
                                IsVisible="False"/>

                        <Button Grid.Column="2"
                                Text="Скасувати"
                                Clicked="OnCancelClicked"
                                BackgroundColor="Transparent"
                                TextColor="Black"
                                HeightRequest="44" />
                    </Grid>
                </VerticalStackLayout>
            </Grid>
        </ScrollView>
    </Grid>
</ContentPage>
